<!DOCTYPE html>
<html>
<head>
	<title>Chicken Kale Soup Recipe</title>

	<!-- Bootstrap Framework, icons, and animate -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="animate.css">

	<!-- Custom CSS -->
	<link rel="stylesheet" type="text/css" href="css/style.css">

	<!-- JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="./js/kitchen.js"></script>
</head>
<body>
	<!-- Navbar -->
	<div id="mainnav" class="sidebar">
		<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
		<a class="nav-item active" href="./home.html"><i class="fa fa-2x fa-home sr-icons"></i>Home</a>
		<a class="nav-item" href="./kitchen.html"><i class="fa fa-2x fa-cutlery sr-icons"></i>My Kitchen</a>
		<a class="nav-item" href="./recipes.html"><i class="fa fa-2x fa-book sr-icons"></i>Recipes Lookup</a>
		<a class="nav-item" href="./favorites.html"><i class="fa fa-2x fa-bookmark sr-icons"></i>Favorites</a>
		<a class="nav-item" href="./index.html">Log Out</a>
	</div>
	<div id="main">
		<button id="opensidebar" class="openbtn" onclick="openNav()">&#9776;</button>
		<button id="closesidebar" class="openbtn" onclick="closeNav()" style="display:none">&times;</button>
	</div>

	<center>
	<img src="./images/Chicken-Kale-Detox-Soup.jpg"/>
		<p> <b> <font size="+3">Chicken Kale Soup</font></b>
		<button id="addin" class="add-ingredient button kitchen-button" onclick="toggleadd(); store();">Add to Favorites!</button>
		<button id="addout" class="add-ingredient button kitchen-button" onclick="toggleadd(); remove();" style="display:none">Added! *Click here to REMOVE*</button>
	</center>
	<p><b>Ingredients </b></p>
	<p>Kale, ???, ???, ???</p>
	<p> <b>Step 1 </b></p>
	<p>. . .</p>
	<p> <b>Step 2 </b></p>
	<p>. . .</p>
	<p><b> Related Recipes</b><p>
		<a href="./kale_pesto_recipe.html">
<img border="0" alt="Kale Image" src="images/kale-pesto.jpg" width="300" height="300"> </a>
<a href="./kale_chips_recipe.html">
<img border="0" alt="Kale Image" src="images/kale-chips.jpg" width="300" height="300"> </a>
<a href="./cranberry_kale_salad_recipe.html">
<img border="0" alt="Kale Image" src="images/Cranberry-Kale-Salad.jpg" width="300" height="300"> </a>

<script>
	// put these functions and scripts into recipe_template.js to have favoriting functionality
	function store() {
		var allrecipes = JSON.parse(localStorage.getItem("allrecipes"));
		var favoritestuff = JSON.parse(localStorage.getItem('favoritedrecipes'));
        var newfav = [];
        if (favoritestuff) {
            for (i=0; i < favoritestuff.length; i++) {
				newfav.push(favoritestuff[i]);
				console.log(favoritestuff[i]);
            }
        }
        console.log(newfav);
		
		if (allrecipes) {
            for (i=0; i < allrecipes.length; i++) {
				if (allrecipes[i].name=='Chicken and Kale Soup') {
					var push=allrecipes[0];
					newfav.push(push);
					console.log('found matching recipe to favorite');
				}
            }
        }
        
        // push data to local storage
        console.log(newfav);
        localStorage.setItem('favoritedrecipes',JSON.stringify(newfav));
	}

	function remove() {
		var favoritestuff = JSON.parse(localStorage.getItem('favoritedrecipes'));
		var newfav = [];
        if (favoritestuff) {
            for (i=0; i < favoritestuff.length; i++) {
				if (favoritestuff[i].name !='Chicken and Kale Soup') {
					newfav.push(favoritestuff[i]);
					console.log(favoritestuff[i]);
				}
            }
		}
		console.log(newfav);
        localStorage.setItem('favoritedrecipes',JSON.stringify(newfav));
	}

	var checkfav = JSON.parse(localStorage.getItem('favoritedrecipes'));
	if (checkfav) {
		$('#addin').show();
		$('#addout').hide();
		for (i=0; i < checkfav.length; i++) {
			if (checkfav[i].name =='Chicken and Kale Soup') {
				$('#addin').hide();
				$('#addout').show();
			}
		}
	}


</script>

</body>
</html>
